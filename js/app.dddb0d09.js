(function(e){function t(t){for(var s,a,o=t[0],u=t[1],c=t[2],d=0,l=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&l.push(r[a][0]),r[a]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);f&&f(t);while(l.length)l.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,a=1;a<n.length;a++){var o=n[a];0!==r[o]&&(s=!1)}s&&(i.splice(t--,1),e=u(u.s=n[0]))}return e}var s={},a={app:0},r={app:0},i=[];function o(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-04ede203":"8fc725a7"}[e]+".js"}function u(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-04ede203":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var s="css/"+({}[e]||e)+"."+{"chunk-04ede203":"a4b70ae7"}[e]+".css",r=u.p+s,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var c=i[o],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===s||d===r))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){c=l[o],d=c.getAttribute("data-href");if(d===s||d===r)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var s=t&&t.target&&t.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=s,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=r;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){a[e]=0})));var s=r[e];if(0!==s)if(s)t.push(s[2]);else{var i=new Promise((function(t,n){s=r[e]=[t,n]}));t.push(s[2]=i);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,u.nc&&d.setAttribute("nonce",u.nc),d.src=o(e);var l=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=r[e];if(0!==n){if(n){var s=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",l.name="ChunkLoadError",l.type=s,l.request=a,n[1](l)}r[e]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},u.m=e,u.c=s,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)u.d(n,s,function(t){return e[t]}.bind(null,s));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/vue-chat/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var f=d;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0129":function(e,t,n){"use strict";var s=n("3bad"),a=n.n(s);a.a},"05a4":function(e,t,n){},"0b0a":function(e,t,n){"use strict";var s=n("36e0"),a=n.n(s);a.a},"0fee":function(e,t,n){},1387:function(e,t,n){"use strict";var s=n("f28b"),a=n.n(s);a.a},"21bb":function(e,t,n){"use strict";var s=n("2dad"),a=n.n(s);a.a},"231a":function(e,t,n){"use strict";var s=n("9420"),a=n.n(s);a.a},"2d17":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"brand-button",attrs:{type:e.type,disabled:e.disabled},on:{click:e.onClick}},[e._v(" "+e._s(e.label)+" ")])},a=[],r={name:"BrandButton",props:{label:{type:String,required:!0},type:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1}},methods:{onClick:function(e){this.$emit("click",e)}}},i=r,o=(n("e78a"),n("2877")),u=Object(o["a"])(i,s,a,!1,null,null,null);t["default"]=u.exports},"2dad":function(e,t,n){},"2fb4":function(e,t,n){},"36e0":function(e,t,n){},"3bad":function(e,t,n){},4108:function(e,t,n){"use strict";var s=n("05a4"),a=n.n(s);a.a},"420a":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("4160"),n("b0c0"),n("d3b7"),n("ac1f"),n("5319"),n("159b"),n("ddb0"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("the-header"),n("router-view")],1)},r=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"the-header"})},o=[],u={name:"Authorization"},c=u,d=(n("0b0a"),n("2877")),l=Object(d["a"])(c,i,o,!1,null,null,null),f=l.exports,h={name:"App",components:{TheHeader:f}},p=h,m=(n("5c0b"),Object(d["a"])(p,a,r,!1,null,null,null)),g=m.exports,v=n("8c4f"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"home__wrapper"},[n("div",{staticClass:"home__inner"},[n("chat-window",{staticClass:"home__chat-window",attrs:{sourceId:2}}),n("chat-window",{staticClass:"home__chat-window",attrs:{sourceId:1}})],1)])])},_=[],b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-window"},[n("chat-window-users-list",{staticClass:"chat-window__chat-window-users-list",attrs:{userList:e.userList},on:{"contact-selected":e.changeDestinationId}}),n("chat-window-chat-area",{staticClass:"chat-window__chat-window-chat-area",attrs:{sourceId:e.sourceId,destinationId:e.destinationId}})],1)},I=[],C=(n("a9e3"),n("5530")),y=n("e017"),E=n.n(y),k=n("21a1"),x=n.n(k),S=new E.a({id:"send",use:"send-usage",viewBox:"0 0 20 18",content:'<symbol viewBox="0 0 20 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="send">\n    <g id="send_Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="send_Rounded" transform="translate(-374.000000, -1529.000000)">\n            <g id="send_Content" transform="translate(100.000000, 1428.000000)">\n                <g id="send_-Round-/-Content-/-send" transform="translate(272.000000, 98.000000)">\n                    <g>\n                        <polygon id="send_Path" points="0 0 24 0 24 24 0 24" />\n                        <path d="M3.4,20.4 L20.85,12.92 C21.66,12.57 21.66,11.43 20.85,11.08 L3.4,3.6 C2.74,3.31 2.01,3.8 2.01,4.51 L2,9.12 C2,9.62 2.37,10.05 2.87,10.11 L17,12 L2.87,13.88 C2.37,13.95 2,14.38 2,14.88 L2.01,19.49 C2.01,20.2 2.74,20.69 3.4,20.4 Z" id="send_üîπIcon-Color" fill="currentColor" />\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</symbol>'}),M=(x.a.add(S),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-window-user-list"},e._l(e.userList,(function(t){return n("chat-window-users-list-contact",{key:t.id,attrs:{user:t},on:{click:function(n){return e.contactSelected(t.id)}}})})),1)}),A=[],O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-window-users-list-contact",on:{click:e.onClick}},[n("div",{staticClass:"chat-window-users-list-contact__avatar-wrapper"},[n("img",{staticClass:"chat-window-users-list-contact__avatar",attrs:{src:e.user.avatar,alt:e.user.login}})]),n("div",{staticClass:"chat-window-users-list-contact__name"},[e._v(" "+e._s(e.user.login)+" ")])])},L=[],j={name:"ChatWindowUsersListContact",props:{user:{type:Object,required:!0}},methods:{onClick:function(e){this.$emit("click",e)}}},T=j,D=(n("4108"),Object(d["a"])(T,O,L,!1,null,null,null)),$=D.exports,B={name:"ChatWindowUsersList",components:{ChatWindowUsersListContact:$},props:{userList:{type:Array,required:!0}},methods:{contactSelected:function(e){this.$emit("contact-selected",e)}}},F=B,N=(n("eca5"),Object(d["a"])(F,M,A,!1,null,null,null)),V=N.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-window-chat-area"},[n("div",{ref:"chatBlock",staticClass:"chat-window-chat-area__chat-block"},[e.destinationId?e._l(e.messageList,(function(t){return n("chat-window-chat-area-message",{key:t.message,ref:"message",refInFor:!0,attrs:{userMessage:{user:e.$store.getters["user/getUserById"](t.sourceId),message:t}}})})):n("span",{staticClass:"chat-window-chat-area__text-empty"},[e._v("–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è —á–∞—Ç, –∫–æ–≥–¥–∞ –í—ã –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç")])],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.destinationId,expression:"destinationId"}],staticClass:"chat-window-chat-area__text-block"},[n("brand-input",{ref:"messageInput",staticClass:"chat-window-chat-area__input",attrs:{type:"textarea",label:"–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...",name:"message"},on:{"input-submit":function(t){return e.sendMessage()}}}),n("div",{staticClass:"chat-window-chat-area__send",on:{click:function(t){return e.sendMessage()}}},[n("svg",{staticClass:"chat-window-chat-area__icon"},[n("use",{attrs:{"xlink:href":"#send"}})])])],1)])},H=[],P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-window-chat-area-message"},[n("div",{staticClass:"chat-window-chat-area-message__avatar-wrapper"},[n("img",{staticClass:"chat-window-chat-area-message__avatar",attrs:{src:e.userMessage.user.avatar,alt:e.userMessage.user.login}})]),n("div",{staticClass:"chat-window-chat-area-message__name-wrapper"},[n("div",{staticClass:"chat-window-chat-area-message__name"},[e._v(" "+e._s(e.userMessage.user.login)+" ")]),n("div",{staticClass:"chat-window-chat-area-message__message"},[e._v(" "+e._s(e.userMessage.message.text)+" ")])]),n("div",{staticClass:"chat-window-chat-area-message__time"},[e._v(" "+e._s(e._getTimeFromDate(e.userMessage.message.time))+" ")])])},U=[],W={name:"ChatWindowChatAreaMessage",props:{userMessage:{type:Object,required:!0}}},K=W,z=(n("0129"),Object(d["a"])(K,P,U,!1,null,null,null)),G=z.exports,R=n("2f62"),J={components:{ChatWindowChatAreaMessage:G,ChatWindowUserRow:G},props:{sourceId:{type:Number,required:!0},destinationId:{required:!0}},computed:Object(C["a"])(Object(C["a"])({},Object(R["c"])({chatMessages:"messages/chatMessages",userList:"user/userList"})),{},{messageList:function(){var e={sourceId:this.sourceId,destinationId:this.destinationId};return this.$store.getters["messages/getMessageList"](e)||[]}}),watch:{messageList:function(){var e=this;this.$nextTick((function(){var t=e.$refs.chatBlock;t.scrollTo({top:t.scrollHeight})}))}},methods:{sendMessage:function(){var e=this,t=this.$refs.messageInput.selfValue,n={ownerIds:[this.sourceId,this.destinationId],message:{sourceId:this.sourceId,text:t,time:Date.now()}};this.$store.dispatch("messages/addToChatMessages",n).then((function(){e.$refs.messageInput.selfValue=""}))}}},Z=J,Q=(n("c4c8"),Object(d["a"])(Z,q,H,!1,null,null,null)),X=Q.exports,Y=Object(R["a"])("user"),ee=Y.mapState,te={name:"ChatWindow",components:{ChatWindowChatArea:X,ChatWindowUsersList:V},props:{sourceId:{type:Number,required:!0}},data:function(){return{user:null,destinationId:null}},computed:Object(C["a"])({},ee(["userList"])),mounted:function(){this.user=this.$store.getters["user/getUserById"](this.sourceId)},methods:{changeDestinationId:function(e){this.destinationId=+e}}},ne=te,se=(n("1387"),Object(d["a"])(ne,b,I,!1,null,null,null)),ae=se.exports,re={name:"Home",components:{ChatWindow:ae}},ie=re,oe=(n("21bb"),Object(d["a"])(ie,w,_,!1,null,null,null)),ue=oe.exports,ce=(n("7db0"),n("d81d"),{userList:[{login:"–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",avatar:"https://sun9-66.userapi.com/c638917/v638917588/50cc/fMMv1167jSg.jpg?ava=1",id:1}]}),de={getUserFreeId:function(e){var t=e.userList.map((function(e){return e.id}));return parseInt(Math.max(t)+1)},getUserById:function(e){return function(t){return e.userList.find((function(e){return e.id===t}))}},getAuthorizationInfo:function(e){return e.userList.length>1}},le={ADD_USER:function(e,t){e.userList.push(t)}},fe={setCurrentUser:function(e,t){return e.commit("ADD_USER",t),new Promise((function(e){e()}))}},he={namespaced:!0,state:ce,getters:de,actions:fe,mutations:le},pe=(n("caad"),n("2532"),{chatMessages:[{ownerIds:[1,2],messages:[{sourceId:1,text:"–ü—Ä–∏–≤–µ—Ç",time:"2011-04-20T09:30:51.01"},{sourceId:1,text:"W P?",time:"2011-04-20T09:30:51.01"}]}]}),me={getMessageList:function(e){return function(t){var n,s;return t.sourceId===t.destinationId?null===(n=e.chatMessages.find((function(e){return e.ownerIds[0]===e.ownerIds[1]&&e.ownerIds[0]===t.sourceId})))||void 0===n?void 0:n.messages:null===(s=e.chatMessages.find((function(e){return e.ownerIds.includes(t.sourceId)&&e.ownerIds.includes(t.destinationId)})))||void 0===s?void 0:s.messages}}},ge={ADD_CHANEL_TO_CHAT_MESSAGES:function(e,t){e.chatMessages.push({ownerIds:t,messages:[]})},ADD_MESSAGE_TO_CHAT_MESSAGES_CHANEL:function(e,t){t.ownerIds[0]===t.ownerIds[1]?e.chatMessages.find((function(e){return e.ownerIds[0]===e.ownerIds[1]&&e.ownerIds[0]===t.ownerIds[0]})).messages.push(t.message):e.chatMessages.find((function(e){return e.ownerIds.includes(t.ownerIds[0])&&e.ownerIds.includes(t.ownerIds[1])})).messages.push(t.message)}},ve={addToChatMessages:function(e,t){var n=e.commit,s=e.state;return t.ownerIds[0]!==t.ownerIds[1]?s.chatMessages.find((function(e){return e.ownerIds.includes(t.ownerIds[0])&&e.ownerIds.includes(t.ownerIds[1])}))||n("ADD_CHANEL_TO_CHAT_MESSAGES",t.ownerIds):s.chatMessages.find((function(e){return e.ownerIds[0]===e.ownerIds[1]&&e.ownerIds[0]===t.ownerIds[0]}))||n("ADD_CHANEL_TO_CHAT_MESSAGES",t.ownerIds),n("ADD_MESSAGE_TO_CHAT_MESSAGES_CHANEL",t),new Promise((function(e){e()}))}},we={namespaced:!0,state:pe,getters:me,actions:ve,mutations:ge};s["a"].use(R["b"]);var _e=new R["b"].Store({state:{},mutations:{},actions:{},modules:{user:he,messages:we}});s["a"].use(v["a"]);var be=function(e,t,n){_e.getters["user/getAuthorizationInfo"]?n("/"):n()},Ie=function(e,t,n){_e.getters["user/getAuthorizationInfo"]?n():n("/authorization")},Ce=[{path:"/",name:"Home",component:ue,beforeEnter:Ie},{path:"/authorization",name:"Authorization",component:function(){return n.e("chunk-04ede203").then(n.bind(null,"f1bd"))},beforeEnter:be}],ye=new v["a"]({mode:"history",base:"/vue-chat/",routes:Ce}),Ee=ye,ke=(n("99af"),{methods:{_getTimeFromDate:function(e){var t=new Date(e);return"".concat(t.getHours(),":").concat(t.getMinutes())}}});n("2fb4");s["a"].config.productionTip=!1,s["a"].mixin(ke);var xe=n("b2db");xe.keys().forEach((function(e){var t=xe(e);t=t.default||t;var n=t.name||e.replace(/^.+\//,"").replace(/\.\w+$/,"");s["a"].component(n,t)})),new s["a"]({router:Ee,store:_e,render:function(e){return e(g)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var s=n("9c0c"),a=n.n(s);a.a},9420:function(e,t,n){},"98c4":function(e,t,n){},"9c0c":function(e,t,n){},b2db:function(e,t,n){var s={"./components/BrandButton.vue":"2d17","./components/BrandInput.vue":"cf99"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=r,e.exports=a,a.id="b2db"},c4c8:function(e,t,n){"use strict";var s=n("420a"),a=n.n(s);a.a},cf99:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"brand-input",class:{"brand-input_focused":e.stateFocused,"brand-input_filled":e.stateFilled||e.selfValue,"brand-input_invalid":e.stateFocused&&e.stateInvalid,"brand-input_textarea":"textarea"===e.type}},["textarea"===e.type?n("label",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.selfValue,expression:"selfValue"}],ref:"inputField",staticClass:"brand-input__input",attrs:{name:e.name,type:e.type,placeholder:e.label,autocomplete:"off"},domProps:{value:e.selfValue},on:{focus:e.onFocus,blur:e.onBlur,input:[function(t){t.target.composing||(e.selfValue=t.target.value)},e.onInput],keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:(t.preventDefault(),e.onInputSubmit())}}})]):n("label",[n("span",{staticClass:"brand-input__label"},[e._v(" "+e._s(e.label)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.selfValue,expression:"selfValue"}],ref:"inputField",staticClass:"brand-input__field",attrs:{name:e.name,autocomplete:"off"},domProps:{value:e.selfValue},on:{focus:e.onFocus,blur:e.onBlur,input:[function(t){t.target.composing||(e.selfValue=t.target.value)},e.onInput],keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:(t.preventDefault(),e.onInputSubmit())}}})])])},a=[],r=(n("4d63"),n("ac1f"),n("25f0"),{name:"BrandInput",props:{name:{type:String,required:!0},label:{type:String,required:!0},type:{type:String,required:!0},value:{type:String,required:!1,default:""},validation:{type:String,required:!1,default:""}},data:function(){return{selfValue:this.value,stateFilled:!1,stateFocused:!1,stateInvalid:!1}},mounted:function(){this.validation.length&&(this.stateInvalid=!0)},methods:{onFocus:function(){this.stateFocused=!0},onBlur:function(){this.stateFocused=!1},onInput:function(e){var t,n;this.stateFilled=!!this.selfValue,this.stateFilled&&(null===(t=this.validation)||void 0===t?void 0:t.length)?this.stateInvalid=!(this.selfValue.length&&(!this.selfValue.length||this.validateInput())):(null===(n=this.validation)||void 0===n?void 0:n.length)&&(this.stateInvalid=!0),this.$emit("input",e)},onInputSubmit:function(e){this.$emit("input-submit",e)},validateInput:function(){switch(this.validation){case"text":return!!this.selfValue.length;case"image":return new RegExp("(?:http(s)?:\\/\\/)?([/|.|\\w|\\s|-])*\\.(?:jpg|jpeg|gif|png)").test(this.selfValue.toLowerCase());default:return!0}}}}),i=r,o=(n("231a"),n("2877")),u=Object(o["a"])(i,s,a,!1,null,null,null);t["default"]=u.exports},e78a:function(e,t,n){"use strict";var s=n("98c4"),a=n.n(s);a.a},eca5:function(e,t,n){"use strict";var s=n("0fee"),a=n.n(s);a.a},f28b:function(e,t,n){}});